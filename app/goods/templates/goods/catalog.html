{% extends "main/base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/catalog.css' %}">

<div class="main-page">
    <h1>Sneaker Catalog</h1>
    <div class="catalog-container">
       {% for prod in products %}
        <div class="catalog-item">
            {% if prod.image %}
                <img src="{{prod.image.url}}" alt="{{prod.name}}" class="sneaker-img">
            {% else %}
                <img src="{% static "images/notfound.jpg" %}" alt="Sneaker Not Found" class="sneaker-img-notfound">
            {% endif %}
            <a href="{% url 'product' prod.slug %}"><h2>{{prod.name}}</h2></a>
            {% if prod.descount %}
                <p class="price">
                    <span class="original-price">{{prod.price}} CAD</span>
                    <span class="discount-price">{{prod.sell_price}} CAD</span>
                </p>
                <span class="discount-label">{{prod.descount}}% OFF</span>
            {% else %}
                <p class="price">{{prod.price}} CAD</p>
            {% endif %}
            <button class="btn add-to-cart">Add to Cart</button>
        </div>
       {% endfor %}
    </div>

    <div class="pagination">
        <ul>
            <li><a href="?page={{1}}">First</a></li>
            <li class="{% if not products.has_previous %} disabled {% endif %}">
                <a href="{% if products.has_previous %}
                    ?page={{products.previous_page_number}}
                    {% else %}#
                {% endif %}">Previous</a>
            </li>


            {% for page in products.paginator.page_range %}
               {% if page >= products.number|add:-2 and page <= products.number|add:2 %}
                    {% if curren_num_page == page %}
                        <li ><a href="?page={{page}}" class='on_num_pagination'>{{ page }}</a></li>
                    {% else %}
                        <li><a href="?page={{page}}">{{ page }}</a></li>
                    {% endif %}
                {% endif %}
            {% endfor %}
            <li class="{% if not products.has_next %} disabled {% endif %}">
                <a href="{% if products.has_next %}
                    ?page={{products.next_page_number}}
                    {% else %}#
                {% endif %}">Next</a>
            </li>
            
        </ul>
    </div>


</div>
{% endblock %}
